package com.paule.kitprod_api.controller;

import com.paule.kitprod_api.model.Charge;
import com.paule.kitprod_api.model.Exploitation;
import com.paule.kitprod_api.model.SequenceGeneratorService;
import com.paule.kitprod_api.repository.ExploitationRepository;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.*;

import java.util.List;
import java.util.UUID;

@CrossOrigin(origins = "*", maxAge = 3600)
@RestController
public class ExploitationController {

    @Autowired
    private SequenceGeneratorService sequenceGeneratorService;

    @Autowired
    public ExploitationRepository exploitationRepository;

    @GetMapping(value = "/exploitations")
    public List<Exploitation> getAllExploitations(@RequestParam Long idUser){

        return exploitationRepository.findAll();
    }

    @PostMapping(value = "/exploitations")
    public Exploitation createExploitation(@RequestBody Exploitation exploitation){
        exploitation.setId(UUID.randomUUID().toString());
        Exploitation insertedExploitation = exploitationRepository.insert(exploitation);

        return insertedExploitation;
    }
}


